## Objective

Sai-Challenger allows setup huge sized configuration. These configurations could be generated by external tools
Configurations could be applied by different appliance APIs (Redis ASIC DB, SAI thrift, etc.).
After that appliance could be tested using various traffic generators (Snappi/OTG, Ptf, etc.).
Sai-Challenger controls all aspects of environment setup providing easy to maintain configs:

* Appliance dataplane configuration
* Appliance configuration per se
* SAI configuration

Also Sai-Challenger provides possibility to test just created environment, by
granting meaningful test preconditions and setups

<a href="url"><img src="../img/SAI-Challenger HL.svg" align="center" width="800" ></a>

Possibility to use various SAI API wrappers is achieved by the next architecture

<a href="url"><img src="../img/SAI-Challenger class diagram.svg" align="center" width="800" ></a>

Typical test execution happen in the next manner
* pytest starts and get paths to test framework configurations
* configurations are passed to sai_environment setup script
* sai_environment loads accessible implementations and forms test environment model
  * configuration could include appliances of different types, every of which could be setup with its own API
  * traffic also could be sent and validated using various traffic generators
* Sai is started
* Setup is loaded to appliance
* Traffic is sent and captured

Because of above schema Sai class don't have to know anything about low-level SAI API and because of this appliance could
be setup using same commands using different API backends(It's possible to use low-level SAI API itself, and SAI-Challenger grants such 
possibility, but in this case portability to use different SAI backend for same test would be lost). 
Same for traffic generation/validation tools

### Adding new SaiClient
To add new SaiClient implementation - just inherit it from `saichallenger.common.sai_client.sai_client.SaiClient` and
implement it's abstractmethods. After that register it at `SaiClient.build`. If you have to use your own SaiClient config - 
see section below

### Using SaiClient config
Typical configuration of SaiThriftClient:

```json5
{
  "DPU": [
    {
      // ...
      "client": {
        "type": "thrift",
        "config": {
          "ip": "127.0.0.1",
          "port": "9092"
        }
      },
      // ...
    }
  ],
  //...
}
```

Typical configuration of SaiRedisClient:
```json5
{
  "DPU": [
    {
      // ...
        "client": {
        "type": "redis",
        "config": {
            "ip": "172.17.0.3",
            "port": "6379",
            "loglevel": "DEBUG"
          }
      },
      // ...
    }
  ],
  //...
}
```

If you have to implement your own SaiClient - add new `type` to config and assure that you have registered SaiClient 
with same name at `SaiClient.build` method